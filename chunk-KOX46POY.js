import{a as c}from"./chunk-FUN2273E.js";import{ca as n,f as i,ha as a,u as s}from"./chunk-3P7EKYVL.js";var f=(()=>{class r{constructor(t){this.http=t,this.VERSION_KEY="app_version",this.currentVersion=null,this.checkIntervalMs=5*60*1e3}initVersionCheck(t=!0){return i(this,null,function*(){yield this.checkVersion(),t&&setInterval(()=>{this.checkVersion()},this.checkIntervalMs)})}checkVersion(){return i(this,null,function*(){try{let e=(yield s(this.http.get("/assets/config/version.json",{headers:{"Cache-Control":"no-cache"}}))).version;this.currentVersion=e;let o=localStorage.getItem(this.VERSION_KEY);o&&o!==e?(console.log(`Nueva versi\xF3n detectada (${e}). Recargando...`),localStorage.setItem(this.VERSION_KEY,e),window.location.reload()):o||localStorage.setItem(this.VERSION_KEY,e)}catch(t){console.error("Error al verificar la versi\xF3n:",t)}})}getVersion(){return this.currentVersion||localStorage.getItem(this.VERSION_KEY)}static{this.\u0275fac=function(e){return new(e||r)(a(c))}}static{this.\u0275prov=n({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();export{f as a};
