import{a as ft,b as ht,c as vt,d as St,e as gt}from"./chunk-7PUGHEN5.js";import{a as dt}from"./chunk-HPS3YVI4.js";import{a as mt}from"./chunk-W57XQJTE.js";import{a as pt,b as ct}from"./chunk-5QEWVUT5.js";import{a as rt}from"./chunk-ZIVIPGGX.js";import{a as z,c as H,e as J}from"./chunk-LW4S5ANT.js";import{b as X,e as Z,h as tt,i as et,k as it,l as ot}from"./chunk-4MLLPPK3.js";import{a as ut}from"./chunk-NULUKBD2.js";import{b as Y}from"./chunk-BCOVYDSP.js";import{c as k}from"./chunk-6T2Y6H2V.js";import{ba as W,ha as at,ia as nt}from"./chunk-PFAMWQVE.js";import{a as lt,b as st}from"./chunk-FHDIZWFX.js";import{b as B,d,f as G,g as L,j as Q,k as q,l as $,m as R,s as j,u as K}from"./chunk-53DBWVNU.js";import{$b as D,Ab as e,Bb as s,Fb as S,Hc as V,Ib as g,Ic as O,Kb as A,Mc as w,Oc as U,Rb as E,Sb as o,Tb as y,Ub as x,V as M,Xa as m,Ya as _,dc as F,ec as T,ga as u,la as N,ob as c,qb as l,ta as h,u as C,ua as v,wb as b,xb as I,yb as P,zb as i}from"./chunk-WHT7HZRB.js";function yt(a,p){if(a&1){let t=S();i(0,"button",19),g("click",function(){h(t);let r=A();return v(r.clearInput())}),i(1,"mat-icon"),o(2,"close"),e()()}}function Ct(a,p){if(a&1&&(i(0,"mat-option",9),o(1),e()),a&2){let t=p.$implicit;l("value",t),m(),x(" ",t," ")}}function Mt(a,p){if(a&1&&(i(0,"mat-option",9),o(1),e()),a&2){let t=p.$implicit;l("value",t),m(),y(t)}}function Nt(a,p){if(a&1&&(i(0,"mat-option",9),o(1),e()),a&2){let t=p.$implicit;l("value",t),m(),y(t)}}var te=(()=>{class a{constructor(t){this.router=t,this.productTypes=ht,this.status=ft,this.units=[],this.fb=u(j),this.store=u(mt),this.navegateService=u(ut),this.unitService=u(dt),this.productService=u(rt),this.navService=u(st),this.pestData={id:0,name:""},this.id=0,this.nameToNavegate="",this.allProducts=[],this.options=[],this.nameValue="",this.setForm(),this.getData(),this.setNav()}ngOnInit(){this.setList(),this.form.get("type")?.valueChanges.subscribe(t=>{this.updateUnits(t)}),this.updateUnits(this.form.get("type")?.value),this.controlFN(),this.form.get("name")?.valueChanges.subscribe(t=>{this.nameValue=t})}save(){let t=this.form.value,n={name:t.name,type:t.type,description:t.description,safetyDataSheetUrl:t.safetyDataSheetUrl,package:{productId:"TEMP-ID",locationId:t.locationId,initialQuantity:t.initialQuantity,currentQuantity:t.initialQuantity,unitOfMeasure:t.unitOfMeasure,status:t.status,location:{locationName:t.locationName,locationArea:t.locationArea,locationSeccion:t.locationSeccion},additions:[{quantity:t.initialQuantity,addDate:new Date}]}};this.store.save(n),this.goBack()}goBack(){this.router.navigate(["app/storage/products"])}updateUnits(t){t!=null&&t!=null&&(this.units=this.unitService.getUnitsByProductType(t),this.units.length>0?this.form.get("unitOfMeasure")?.setValue(this.units[0]):this.form.get("unitOfMeasure")?.setValue(null))}setForm(){this.form=this.fb.group({name:["",d.required],type:["",d.required],description:[""],safetyDataSheetUrl:[""],locationId:[""],initialQuantity:[0,d.required],unitOfMeasure:[""],status:[this.status[0]],locationName:[""],locationArea:[""],locationSeccion:[""]})}getData(){this.pestData=this.navegateService.getData(this.router),this.pestData!=null&&this.pestData!=null&&(this.id=this.pestData.id,this.nameToNavegate=this.pestData.name)}getProductNames(t){return t.map(n=>n.name)}setList(){this.allProducts=this.productService.products(),this.allProducts!=null&&this.allProducts!=null&&this.allProducts.length>0&&(this.options=this.getProductNames(this.allProducts))}controlFN(){if(!this.form){console.error("AutocompleteInputComponent: error FormGroup.");return}let t=this.form.get("name");if(!t){console.error("AutocompleteInputComponent: error in 'name' no find FormGroup.");return}this.filteredOptions=t.valueChanges.pipe(M(""),C(n=>this._filter(n||"")))}_filter(t){let n=t.toLowerCase();return this.options.filter(r=>r.toLowerCase().includes(n))}clearInput(){this.form.get("name")?.setValue("")}checkValue(){return this.nameValue!==""}setNav(){this.navService.reSetNavConfig();let t=new lt;t.title="Add Product",t.ico.menu=!1,t.ico.back=!0,t.ico.favorite=!1,t.ico.logut=!1,t.ico.label=!1,t.ico.sds=!1,t.goto="app/storage/products",this.navService.setNavConfig(t)}static{this.\u0275fac=function(n){return new(n||a)(_(k))}}static{this.\u0275cmp=N({type:a,selectors:[["app-add-product"]],standalone:!0,features:[D],decls:53,vars:10,consts:[["auto","matAutocomplete"],[1,"form-wrapper",3,"ngSubmit","formGroup"],["appearance","outline"],["type","text","matInput","",3,"formControlName","formGroup","matAutocomplete"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["autoActiveFirstOption",""],[3,"value",4,"ngFor","ngForOf"],["appearance","outline",1,"full-width"],["formControlName","type"],[3,"value"],["matInput","","formControlName","description"],["matInput","","formControlName","safetyDataSheetUrl"],["formControlName","unitOfMeasure"],["matInput","","type","number","formControlName","initialQuantity"],["matInput","","formControlName","status"],["matInput","","formControlName","locationName"],["matInput","","formControlName","locationArea"],["matInput","","formControlName","locationSeccion"],["mat-raised-button","","color","primary","type","submit",1,"full-width"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(n,r){if(n&1){let f=S();i(0,"form",1),g("ngSubmit",function(){return h(f),v(r.save())}),i(1,"mat-form-field",2)(2,"mat-label"),o(3,"Product Name"),e(),s(4,"input",3),c(5,yt,3,0,"button",4),i(6,"mat-autocomplete",5,0),c(8,Ct,2,2,"mat-option",6),F(9,"async"),e()(),i(10,"mat-form-field",7)(11,"mat-label"),o(12,"Type/Physical State"),e(),i(13,"mat-select",8)(14,"mat-option",9),o(15,"None"),e(),I(16,Mt,2,2,"mat-option",9,b),e()(),i(18,"mat-form-field",2)(19,"mat-label"),o(20,"Description"),e(),s(21,"input",10),e(),i(22,"mat-form-field",2)(23,"mat-label"),o(24,"Safety Data Sheet Url"),e(),s(25,"input",11),e(),i(26,"mat-form-field",2)(27,"mat-label"),o(28,"Unit Of Measure"),e(),i(29,"mat-select",12),c(30,Nt,2,2,"mat-option",6),e()(),i(31,"mat-form-field",2)(32,"mat-label"),o(33,"Initial Quantity"),e(),s(34,"input",13),e(),i(35,"mat-form-field",2)(36,"mat-label"),o(37,"Package status"),e(),s(38,"input",14),e(),i(39,"mat-form-field",2)(40,"mat-label"),o(41,"Location Name"),e(),s(42,"input",15),e(),i(43,"mat-form-field",2)(44,"mat-label"),o(45,"Location Area"),e(),s(46,"input",16),e(),i(47,"mat-form-field",2)(48,"mat-label"),o(49," Location Section"),e(),s(50,"input",17),e(),i(51,"button",18),o(52," Save "),e()()}if(n&2){let f=E(7);l("formGroup",r.form),m(4),l("formControlName","name")("formGroup",r.form)("matAutocomplete",f),m(),l("ngIf",r.checkValue()),m(3),l("ngForOf",T(9,8,r.filteredOptions)),m(6),l("value",null),m(2),P(r.productTypes),m(14),l("ngForOf",r.units)}},dependencies:[U,V,O,w,K,Q,B,q,G,L,$,R,et,tt,X,Z,gt,vt,W,St,ot,it,J,z,H,nt,at,ct,pt,Y],styles:[".form-wrapper[_ngcontent-%COMP%]{padding:1rem;display:flex;flex-direction:column;gap:1rem}.full-width[_ngcontent-%COMP%]{width:100%}"]})}}return a})();export{te as a};
