import{a as Q}from"./chunk-AM4UMGKA.js";import{a as G}from"./chunk-ZIVIPGGX.js";import{d as $}from"./chunk-XJ2CGXO4.js";import{e as E}from"./chunk-LW4S5ANT.js";import{a as U,b as A,c as L,d as B,f as H}from"./chunk-LXI5ROLQ.js";import{l as R}from"./chunk-4MLLPPK3.js";import{a as V}from"./chunk-NULUKBD2.js";import"./chunk-Q5HEFZWF.js";import"./chunk-CARY4E7O.js";import{d as q}from"./chunk-DGN2FXSL.js";import"./chunk-NFBI5KHV.js";import{b as w}from"./chunk-BCOVYDSP.js";import{a as N,c as O}from"./chunk-6T2Y6H2V.js";import{a as D,c as b,g as T,ga as k,ia as z}from"./chunk-PFAMWQVE.js";import{a as J,b as K}from"./chunk-FHDIZWFX.js";import{t as j}from"./chunk-53DBWVNU.js";import{$b as x,Ab as n,Gc as _,Kb as l,Oc as y,Sb as c,Tb as m,Ub as p,Xa as s,Ya as o,bc as F,ga as v,la as f,ob as h,qb as g,uc as P,vb as C,wb as M,xb as S,yb as I,zb as a}from"./chunk-WHT7HZRB.js";var tt=e=>({highlight:e});function et(e,u){if(e&1&&(a(0,"li",0),c(1),n()),e&2){let t=u.$implicit,i=l(2);g("ngClass",F(2,tt,t.toLowerCase()===i.pestData.name.toLowerCase())),s(),p(" ",t," ")}}function it(e,u){if(e&1&&(a(0,"mat-card-title"),c(1),n(),a(2,"mat-card-subtitle"),c(3),n(),a(4,"mat-card-content")(5,"p")(6,"strong"),c(7,"Application/Treatment:"),n()(),a(8,"p"),c(9),n(),a(10,"p")(11,"strong"),c(12,"Pests Controlled:"),n()(),a(13,"ul"),S(14,et,2,4,"li",0,M),n()()),e&2){let t=l();s(),m(t.product.name),s(2),p(" Active Ingredient: ",t.product.activeIngredients," "),s(6),m(t.product.applicationTreatment),s(5),I(t.product.pestsControlled)}}var bt=(()=>{class e{constructor(t,i,r,d,W,X,Y,Z){this.route=t,this.router=i,this.http=r,this.favService=d,this.productService=W,this.navegateService=X,this.matIconRegistry=Y,this.domSanitizer=Z,this.product=null,this.isFav=!1,this.pestData={id:0,name:""},this.id=0,this.configUrl="assets/config/products.json",this.nameToNavegate="",this.oneProduct={id:0,name:"",activeIngredients:"",applicationTreatment:"",pestsControlled:[],url1:"",url2:""},this.navService=v(K),this.navConfig=this.navService.config(),this.matIconRegistry.addSvgIcon("sds",this.domSanitizer.bypassSecurityTrustResourceUrl("assets/icons/sds.svg")),this.matIconRegistry.addSvgIcon("label",this.domSanitizer.bypassSecurityTrustResourceUrl("assets/icons/label.svg")),this.getData(),P(()=>{this.navService.config().favorite.toggleFavorite!=this.isFav&&this.toggleFavorite()})}getData(){let t=this.router.getCurrentNavigation();this.pestData=t?.extras?.state?.data||history.state.data||null,this.pestData?(this.id=this.pestData.id,this.nameToNavegate=this.pestData.name!=null&&this.pestData.name!=null?this.pestData.name:""):console.warn("No pestData passed, fetching by ID or redirecting...")}ngOnInit(){let t=this.productService.products();t!=null&&t!=null&&t.length>0&&this.checkProduct(t,this.id)}setNav(){let t=new J;t.title="Product Detail",t.ico.menu=!1,t.ico.back=!0,t.ico.favorite=!0,t.ico.logut=!1,t.ico.label=!0,t.ico.sds=!0,t.favorite.viewDetail=!0,t.favorite.active=this.isFav,t.favorite.toggleFavorite=this.isFav,t.label=this.oneProduct.url1,t.sds=this.oneProduct.url2,this.nameToNavegate==="favorites"?t.goto="app/favorites":t.goto="app/home",this.navService.setNavConfig(t)}checkProduct(t,i){let r=t.find(d=>d.id===i);r?(this.product=r,this.oneProduct=r):console.error("Producto no encontrado con id:",i),this.product?this.isFav=this.favService.isFavorite(this.id):this.router.navigate(["app/home"]),this.setNav()}toggleFavorite(){this.isFav?this.favService.removeFromFavorites(this.product.id):this.favService.addToFavorites(this.product),this.isFav=!this.isFav}static{this.\u0275fac=function(i){return new(i||e)(o(N),o(O),o(D),o(Q),o(G),o(V),o(k),o(T))}}static{this.\u0275cmp=f({type:e,selectors:[["app-product-detail"]],standalone:!0,features:[x],decls:2,vars:1,consts:[[3,"ngClass"]],template:function(i,r){i&1&&(a(0,"mat-card"),h(1,it,16,3),n()),i&2&&(s(),C(1,r.product?1:-1))},dependencies:[y,_,b,j,w,E,R,z,H,U,L,B,A,$,q],styles:['@charset "UTF-8";mat-card[_ngcontent-%COMP%]{width:90%;max-width:600px;margin:2rem auto;padding:1rem}mat-card-title[_ngcontent-%COMP%]{font-size:1.5rem}mat-card-subtitle[_ngcontent-%COMP%]{margin-bottom:1rem}ul[_ngcontent-%COMP%]{padding-left:1.2rem;list-style-type:disc}button[_ngcontent-%COMP%]{margin-top:1rem}.highlight[_ngcontent-%COMP%]{color:#00f;font-weight:700}.toolbar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:0 8px}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}.fav-button[_ngcontent-%COMP%]{background:transparent!important;font-weight:500;text-transform:none}.fav-button.add[_ngcontent-%COMP%], .fav-button.remove[_ngcontent-%COMP%]{color:#fff}']})}}return e})();export{bt as ProductDetailComponent};
