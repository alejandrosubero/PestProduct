import{a as Q}from"./chunk-LLOC5ANB.js";import{a as G}from"./chunk-S456R345.js";import{d as $}from"./chunk-WI6ZF6X7.js";import{e as E}from"./chunk-5ETXQJ6Z.js";import{a as U,b as A,c as L,d as B,f as H}from"./chunk-4SPE7LMF.js";import{m as R}from"./chunk-RPOOMM4R.js";import{a as V}from"./chunk-MAELP3WW.js";import"./chunk-7GZRYZ3W.js";import"./chunk-CARY4E7O.js";import{d as q}from"./chunk-EYGZ565A.js";import"./chunk-HEOXUAG5.js";import{b as O}from"./chunk-NMLM2UYX.js";import{a as N,c as j}from"./chunk-JVFQFS5Z.js";import{a as y,c as b,g as T,la as k,na as z}from"./chunk-OUSHV2EZ.js";import{a as J,b as K}from"./chunk-NKIKHFFW.js";import{t as w}from"./chunk-ZQAR5GQS.js";import{$a as o,Ab as M,Bb as I,Cb as a,Db as r,Lc as D,Nb as l,Tc as _,Vb as c,Wb as m,Xb as p,_a as s,cc as F,ec as P,ja as u,oa as f,rb as h,tb as g,yb as C,yc as x,zb as S}from"./chunk-BTT23VXK.js";var tt=e=>({highlight:e});function et(e,v){if(e&1&&(a(0,"li",0),c(1),r()),e&2){let t=v.$implicit,i=l(2);g("ngClass",P(2,tt,t.toLowerCase()===i.pestData.name.toLowerCase())),s(),p(" ",t," ")}}function it(e,v){if(e&1&&(a(0,"mat-card-title"),c(1),r(),a(2,"mat-card-subtitle"),c(3),r(),a(4,"mat-card-content")(5,"p")(6,"strong"),c(7,"Application/Treatment:"),r()(),a(8,"p"),c(9),r(),a(10,"p")(11,"strong"),c(12,"Pests Controlled:"),r()(),a(13,"ul"),M(14,et,2,4,"li",0,S),r()()),e&2){let t=l();s(),m(t.product.name),s(2),p(" Active Ingredient: ",t.product.activeIngredients," "),s(6),m(t.product.applicationTreatment),s(5),I(t.product.pestsControlled)}}var bt=(()=>{class e{constructor(t,i,n,d,W,X,Y,Z){this.route=t,this.router=i,this.http=n,this.favService=d,this.productService=W,this.navegateService=X,this.matIconRegistry=Y,this.domSanitizer=Z,this.product=null,this.isFav=!1,this.pestData={id:0,name:""},this.id=0,this.configUrl="assets/config/products.json",this.nameToNavegate="",this.oneProduct={id:0,name:"",activeIngredients:"",applicationTreatment:"",pestsControlled:[],url1:"",url2:""},this.navService=u(K),this.navConfig=this.navService.config(),this.matIconRegistry.addSvgIcon("sds",this.domSanitizer.bypassSecurityTrustResourceUrl("assets/icons/sds.svg")),this.matIconRegistry.addSvgIcon("label",this.domSanitizer.bypassSecurityTrustResourceUrl("assets/icons/label.svg")),this.getData(),x(()=>{this.navService.config().favorite.toggleFavorite!=this.isFav&&this.toggleFavorite()}),this.setNav()}getData(){let t=this.router.getCurrentNavigation();this.pestData=t?.extras?.state?.data||history.state.data||null,this.pestData?(this.id=this.pestData.id,this.nameToNavegate=this.pestData.name!=null&&this.pestData.name!=null?this.pestData.name:""):console.warn("No pestData passed, fetching by ID or redirecting...")}ngOnInit(){let t=this.productService.products();t!=null&&t!=null&&t.length>0&&this.checkProduct(t,this.id)}setNav(){let t=new J;t.title="Product Detail",t.ico.menu=!1,t.ico.back=!0,t.ico.favorite=!0,t.ico.logut=!1,t.ico.label=!0,t.ico.sds=!0,t.favorite.viewDetail=!0,t.favorite.active=this.isFav,t.favorite.toggleFavorite=this.isFav,t.label=this.oneProduct.url1,t.sds=this.oneProduct.url2,this.nameToNavegate==="favorites"?t.goto="app/favorites":t.goto="app/home",this.navService.setNavConfig(t)}checkProduct(t,i){let n=t.find(d=>d.id===i);n?(this.product=n,this.oneProduct=n):console.error("Producto no encontrado con id:",i),this.product?this.isFav=this.favService.isFavorite(this.id):this.router.navigate(["app/home"])}toggleFavorite(){this.isFav?this.favService.removeFromFavorites(this.product.id):this.favService.addToFavorites(this.product),this.isFav=!this.isFav}static{this.\u0275fac=function(i){return new(i||e)(o(N),o(j),o(y),o(Q),o(G),o(V),o(k),o(T))}}static{this.\u0275cmp=f({type:e,selectors:[["app-product-detail"]],standalone:!0,features:[F],decls:2,vars:1,consts:[[3,"ngClass"]],template:function(i,n){i&1&&(a(0,"mat-card"),h(1,it,16,3),r()),i&2&&(s(),C(1,n.product?1:-1))},dependencies:[_,D,b,w,O,E,R,z,H,U,L,B,A,$,q],styles:['@charset "UTF-8";mat-card[_ngcontent-%COMP%]{width:90%;max-width:600px;margin:2rem auto;padding:1rem}mat-card-title[_ngcontent-%COMP%]{font-size:1.5rem}mat-card-subtitle[_ngcontent-%COMP%]{margin-bottom:1rem}ul[_ngcontent-%COMP%]{padding-left:1.2rem;list-style-type:disc}button[_ngcontent-%COMP%]{margin-top:1rem}.highlight[_ngcontent-%COMP%]{color:#00f;font-weight:700}.fav-button[_ngcontent-%COMP%]{background:transparent!important;font-weight:500;text-transform:none}.fav-button.add[_ngcontent-%COMP%], .fav-button.remove[_ngcontent-%COMP%]{color:#fff}']})}}return e})();export{bt as ProductDetailComponent};
