import{a as J}from"./chunk-NS24V2YC.js";import{a as G}from"./chunk-SFFAMYG3.js";import{d as V,g as q}from"./chunk-CWRYFMIR.js";import"./chunk-HUR4NRDB.js";import{a as U,b as H,c as R,d as $,f as z}from"./chunk-XZLC6AHS.js";import{E as B,q as y,s as E,t as O}from"./chunk-CRMRBZ6Y.js";import{a as k,c as I,f as w,ga as j,h as T,ha as N,ia as A,ja as L,ka as K}from"./chunk-RGJBUWC3.js";import"./chunk-CARY4E7O.js";import{Db as d,Dc as F,Fb as u,Nb as r,Ob as p,Pb as f,Ua as c,Va as l,Wb as S,Xb as x,ja as h,kb as g,mb as _,rb as C,sb as b,tb as M,ub as P,vb as i,vc as D,wb as o,xb as m}from"./chunk-VZZX6ACQ.js";var X=a=>({highlight:a});function Y(a,v){if(a&1&&(i(0,"li",6),r(1),o()),a&2){let t=v.$implicit,n=u(2);_("ngClass",x(2,X,t.toLowerCase()===n.pestData.name.toLowerCase())),c(),f(" ",t," ")}}function Z(a,v){if(a&1&&(i(0,"mat-card-title"),r(1),o(),i(2,"mat-card-subtitle"),r(3),o(),i(4,"mat-card-content")(5,"p")(6,"strong"),r(7,"Application/Treatment:"),o()(),i(8,"p"),r(9),o(),i(10,"p")(11,"strong"),r(12,"Pests Controlled:"),o()(),i(13,"ul"),M(14,Y,2,4,"li",6,b),o()()),a&2){let t=u();c(),p(t.product.name),c(2),f(" Active Ingredient: ",t.product.activeIngredients," "),c(6),p(t.product.applicationTreatment),c(5),P(t.product.pestsControlled)}}var Mt=(()=>{class a{constructor(t,n,e,s,Q,W){this.route=t,this.router=n,this.http=e,this.favService=s,this.productService=Q,this.navegateService=W,this.product=null,this.isFav=!1,this.pestData={id:0,name:""},this.id=0,this.configUrl="assets/config/products.json",this.nameToNavegate="",this.oneProduct={id:0,name:"",activeIngredients:"",applicationTreatment:"",pestsControlled:[],url1:"",url2:""},this.getData()}getData(){let t=this.router.getCurrentNavigation();this.pestData=t?.extras?.state?.data||history.state.data||null,this.pestData?(this.id=this.pestData.id,this.nameToNavegate=this.pestData.name!=null&&this.pestData.name!=null?this.pestData.name:""):console.warn("No pestData passed, fetching by ID or redirecting...")}ngOnInit(){let t=this.productService.products();t!=null&&t!=null&&t.length>0&&this.checkProduct(t,this.id)}checkProduct(t,n){let e=t.find(s=>s.id===n);e?(this.product=e,this.oneProduct=e):console.error("Producto no encontrado con id:",n),this.product?this.isFav=this.favService.isFavorite(this.id):this.router.navigate(["/home"])}back(){this.nameToNavegate==="favorites"?this.goFavorites():this.router.navigate(["/home"])}toggleFavorite(){this.isFav?this.favService.removeFromFavorites(this.product.id):this.favService.addToFavorites(this.product),this.isFav=!this.isFav}goFavorites(){this.navegateService.goFavorites("favorites",1)}viewPdf(){window.open(this.oneProduct.url1,"_blank")}downloadPdf(){let t=this.oneProduct.url1,n=`${new Date}.pdf`,e=document.createElement("a");e.href=t,e.download=n,e.click(),e.remove()}static{this.\u0275fac=function(n){return new(n||a)(l(w),l(T),l(k),l(J),l(G),l(K))}}static{this.\u0275cmp=h({type:a,selectors:[["app-product-detail"]],standalone:!0,features:[S],decls:18,vars:2,consts:[["color","primary",1,"toolbar","mobile-toolbar"],["mat-icon-button","","aria-label","Back",3,"click"],[1,"spacer"],["mat-icon-button","","aria-label","View PDF",3,"click"],["mat-icon-button","","aria-label","Download Pdf",3,"click"],["mat-icon-button","","matTooltip","Favorites","aria-label","Favorites",3,"click"],[3,"ngClass"]],template:function(n,e){n&1&&(i(0,"mat-toolbar",0)(1,"button",1),d("click",function(){return e.back()}),i(2,"mat-icon"),r(3,"arrow_back"),o()(),m(4,"span",2),i(5,"button",3),d("click",function(){return e.viewPdf()}),i(6,"mat-icon"),r(7,"visibility"),o()(),m(8,"span",2),i(9,"button",4),d("click",function(){return e.downloadPdf()}),i(10,"mat-icon"),r(11,"picture_as_pdf"),o()(),m(12,"span",2),i(13,"button",5),d("click",function(){return e.toggleFavorite()}),i(14,"mat-icon"),r(15),o()()(),i(16,"mat-card"),g(17,Z,16,3),o()),n&2&&(c(15),p(e.isFav?"star":"star_border"),c(2),C(17,e.product?17:-1))},dependencies:[F,D,I,y,O,E,N,j,B,L,A,z,U,R,$,H,V,q],styles:['@charset "UTF-8";mat-card[_ngcontent-%COMP%]{width:90%;max-width:600px;margin:2rem auto;padding:1rem}mat-card-title[_ngcontent-%COMP%]{font-size:1.5rem}mat-card-subtitle[_ngcontent-%COMP%]{margin-bottom:1rem}ul[_ngcontent-%COMP%]{padding-left:1.2rem;list-style-type:disc}button[_ngcontent-%COMP%]{margin-top:1rem}.highlight[_ngcontent-%COMP%]{color:#00f;font-weight:700}.toolbar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:0 8px}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}.fav-button[_ngcontent-%COMP%]{background:transparent!important;font-weight:500;text-transform:none}.fav-button.add[_ngcontent-%COMP%], .fav-button.remove[_ngcontent-%COMP%]{color:#fff}']})}}return a})();export{Mt as ProductDetailComponent};
