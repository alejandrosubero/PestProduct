import{a as K,b as R}from"./chunk-MYIRG6YE.js";import{a as A}from"./chunk-MVR2SBDL.js";import{a as $}from"./chunk-K3BNIXJ3.js";import{a as N}from"./chunk-ZSK56BZL.js";import"./chunk-53KECMHQ.js";import"./chunk-O6ZGCYQU.js";import"./chunk-L2CEHP2K.js";import{c as k,e as E}from"./chunk-N5FOZFUG.js";import{a as j,f as V}from"./chunk-UCH6ZMQM.js";import"./chunk-KXJZ4KRG.js";import"./chunk-CARY4E7O.js";import{a as B,b as D,d as L}from"./chunk-6J673JO5.js";import"./chunk-GCRZXU3H.js";import{a as T,b}from"./chunk-4NA7GYT4.js";import{c as I}from"./chunk-T4WKOVX3.js";import{ka as O,la as F}from"./chunk-4NVBDXTK.js";import"./chunk-MTHBGCRI.js";import{Bb as n,Cb as a,Db as M,Hb as C,Kb as u,Kc as v,Lc as P,Mb as d,Rc as y,Ub as c,Vb as S,Za as o,_a as m,bc as w,f as h,na as x,qb as g,sb as l,va as f,wa as _}from"./chunk-7EUIRZQQ.js";function q(e,p){e&1&&M(0,"mat-progress-spinner",5)}function z(e,p){if(e&1){let t=C();n(0,"mat-list-item")(1,"mat-card",7),u("click",function(){let i=f(t).$implicit,s=d(2);return _(s.selectPhrase(i))}),n(2,"div",8),c(3),a(),n(4,"div",9)(5,"button",10),u("click",function(i){let s=f(t).$implicit;return d(2).deletePhrase(s),_(i.stopPropagation())}),n(6,"mat-icon"),c(7,"delete"),a()()()()()}if(e&2){let t=p.$implicit;o(3),S(t.phrase)}}function G(e,p){if(e&1&&(n(0,"mat-list"),g(1,z,8,1,"mat-list-item",6),a()),e&2){let t=d();o(),l("ngForOf",t.phrases)}}function H(e,p){e&1&&(n(0,"div",11),c(1," No hay frases sin completar. "),a())}var ht=(()=>{class e{constructor(t,r,i,s){this.db=t,this.phraseService=r,this.router=i,this.snack=s,this.phrases=[],this.loading=!1}ngOnInit(){this.load()}load(){return h(this,null,function*(){this.loading=!0;try{let t=yield this.db.getAllPhrase();this.phrases=(t??[]).filter(r=>r.isComplete===!1)}catch(t){console.error(t),this.snack.open("Error cargando frases","Cerrar",{duration:2e3})}finally{this.loading=!1}})}selectPhrase(t){this.phraseService.setCurrentString(t.phrase),this.router.navigate(["/work-text-phrase"])}deletePhrase(t){return h(this,null,function*(){if(!(!t?.id||!confirm("\xBFEliminar frase?")))try{yield this.db.deletePhrase(t.id),this.snack.open("Frase eliminada","OK",{duration:1500}),yield this.load()}catch(i){console.error(i),this.snack.open("Error eliminando","Cerrar",{duration:2e3})}})}static{this.\u0275fac=function(r){return new(r||e)(m(N),m(A),m(I),m($))}}static{this.\u0275cmp=x({type:e,selectors:[["app-show-text-phrase"]],standalone:!0,features:[w],decls:6,vars:3,consts:[["color","primary"],[1,"list-container"],["diameter","36","mode","indeterminate",4,"ngIf"],[4,"ngIf"],["class","empty",4,"ngIf"],["diameter","36","mode","indeterminate"],[4,"ngFor","ngForOf"],["role","button","tabindex","0","aria-label","Seleccionar frase",1,"phrase-card",3,"click"],[1,"phrase-text"],[1,"actions"],["mat-icon-button","","aria-label","Eliminar",3,"click"],[1,"empty"]],template:function(r,i){r&1&&(n(0,"mat-toolbar",0),c(1,"Frases (no completadas)"),a(),n(2,"div",1),g(3,q,1,0,"mat-progress-spinner",2)(4,G,2,1,"mat-list",3)(5,H,2,0,"div",4),a()),r&2&&(o(3),l("ngIf",i.loading),o(),l("ngIf",!i.loading&&i.phrases.length),o(),l("ngIf",!i.loading&&i.phrases.length===0))},dependencies:[y,v,P,L,B,D,V,j,F,O,E,k,b,T,R,K],styles:[".list-container[_ngcontent-%COMP%]{max-width:900px;margin:16px auto;padding:8px}.phrase-card[_ngcontent-%COMP%]{padding:12px;margin:8px 0;display:flex;justify-content:space-between;align-items:center;cursor:pointer}.phrase-text[_ngcontent-%COMP%]{flex:1;white-space:pre-wrap;word-break:break-word}.actions[_ngcontent-%COMP%]{margin-left:12px}.empty[_ngcontent-%COMP%]{text-align:center;padding:24px;color:#0009}"]})}}return e})();export{ht as ShowTextPhraseComponent};
