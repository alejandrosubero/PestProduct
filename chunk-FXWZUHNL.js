import{a}from"./chunk-OUSHV2EZ.js";import{da as n,f as o,ia as c,u as s}from"./chunk-BTT23VXK.js";var f=(()=>{class r{constructor(t){this.http=t,this.VERSION_KEY="app_version",this.currentVersion=null,this.checkIntervalMs=5*60*1e3,this.start()}start(){return o(this,null,function*(){try{let t=localStorage.getItem(this.VERSION_KEY);t!=null&&t!=null&&t!=""?this.currentVersion=t:this.checkVersion()}catch{console.log("Error to check Version... "),this.initVersionCheck()}})}initVersionCheck(t=!0){return o(this,null,function*(){yield this.checkVersion(),t&&setInterval(()=>{this.checkVersion()},this.checkIntervalMs)})}checkVersion(){return o(this,null,function*(){try{let e=(yield s(this.http.get("/assets/config/version.json",{headers:{"Cache-Control":"no-cache"}}))).version;this.currentVersion=e;let i=localStorage.getItem(this.VERSION_KEY);i&&i!==e?(console.log(`Nueva versi\xF3n detectada (${e}). Recargando...`),localStorage.setItem(this.VERSION_KEY,e),window.location.reload()):i||localStorage.setItem(this.VERSION_KEY,e)}catch(t){console.error("Error al verificar la versi\xF3n:",t)}})}getVersion(){return this.currentVersion||localStorage.getItem(this.VERSION_KEY)}static{this.\u0275fac=function(e){return new(e||r)(c(a))}}static{this.\u0275prov=n({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();export{f as a};
