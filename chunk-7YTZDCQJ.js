import{a as G}from"./chunk-MVR2SBDL.js";import{a as j}from"./chunk-K3BNIXJ3.js";import{a as N}from"./chunk-ZSK56BZL.js";import"./chunk-53KECMHQ.js";import"./chunk-O6ZGCYQU.js";import"./chunk-L2CEHP2K.js";import{a as P,e as w}from"./chunk-N5FOZFUG.js";import{a as D,f as K}from"./chunk-UCH6ZMQM.js";import{c as I,i as T,j as O,l as F,m as L}from"./chunk-P4PHYZLP.js";import"./chunk-KXJZ4KRG.js";import"./chunk-CARY4E7O.js";import"./chunk-GCRZXU3H.js";import{a as v,b as E}from"./chunk-4NA7GYT4.js";import{d as k,f as C}from"./chunk-T4WKOVX3.js";import{ka as A,la as B}from"./chunk-4NVBDXTK.js";import{b,f as _,i as S,t as y}from"./chunk-MTHBGCRI.js";import{$b as M,Bb as e,Cb as a,Kb as m,Rc as x,Ub as r,Za as u,Zb as f,_a as s,_b as h,bc as g,f as p,na as d}from"./chunk-7EUIRZQQ.js";var st=(()=>{class l{constructor(n,t,o){this.phraseService=n,this.db=t,this.snack=o,this.textarea="",this.loading=!1}generateIntoTextarea(){let n=this.phraseService.generateTxt();this.textarea=n,this.snack.open("Texto generado en el editor","OK",{duration:1200})}getOneComplete(){return p(this,null,function*(){this.loading=!0;try{let t=((yield this.db.getAllPhrase())??[]).filter(i=>i.isComplete===!0);if(!t.length){this.snack.open("No hay frases completas guardadas","OK",{duration:1500});return}let o=t[Math.floor(Math.random()*t.length)];this.textarea=o.phrase,this.snack.open("Frase completa cargada","OK",{duration:1200})}catch(n){console.error(n),this.snack.open("Error cargando frases completas","Cerrar",{duration:2e3})}finally{this.loading=!1}})}saveAsComplete(){return p(this,null,function*(){let n=(this.textarea??"").trim();if(!n){this.snack.open("No hay texto para guardar","Cerrar",{duration:1500});return}try{let t={phrase:n,isComplete:!0};yield this.db.addPhrase(t),this.snack.open("Guardado como frase completa","OK",{duration:1500})}catch(t){console.error(t),this.snack.open("Error guardando","Cerrar",{duration:2e3})}})}static{this.\u0275fac=function(t){return new(t||l)(s(G),s(N),s(j))}}static{this.\u0275cmp=d({type:l,selectors:[["app-main-phrase"]],standalone:!0,features:[g],decls:29,vars:1,consts:[["color","primary"],[1,"container"],["appearance","outline",1,"full"],["matInput","","rows","8",3,"ngModelChange","ngModel"],[1,"actions"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","accent",3,"click"],[1,"nav-links"],["mat-stroked-button","","routerLink","/show-text-phrase"],["mat-stroked-button","","routerLink","/work-text-phrase"],["mat-stroked-button","","routerLink","/add-text-phrase"],["mat-stroked-button","","routerLink","/complete-phrase"]],template:function(t,o){t&1&&(e(0,"mat-toolbar",0),r(1,"Main Phrase"),a(),e(2,"mat-card",1)(3,"mat-form-field",2)(4,"mat-label"),r(5,"Editor principal"),a(),e(6,"textarea",3),M("ngModelChange",function(c){return h(o.textarea,c)||(o.textarea=c),c}),a()(),e(7,"div",4)(8,"button",5),m("click",function(){return o.generateIntoTextarea()}),e(9,"mat-icon"),r(10,"bolt"),a(),r(11," Generar"),a(),e(12,"button",6),m("click",function(){return o.getOneComplete()}),e(13,"mat-icon"),r(14,"shuffle"),a(),r(15," Cargar completa"),a(),e(16,"button",7),m("click",function(){return o.saveAsComplete()}),e(17,"mat-icon"),r(18,"save_alt"),a(),r(19," Guardar como completa"),a()(),e(20,"div",8)(21,"button",9),r(22,"Ver frases"),a(),e(23,"button",10),r(24,"Ir a workspace"),a(),e(25,"button",11),r(26,"Agregar nueva"),a(),e(27,"button",12),r(28,"Ver completas"),a()()()),t&2&&(u(6),f("ngModel",o.textarea))},dependencies:[x,y,b,_,S,O,T,I,L,F,w,P,K,D,B,A,E,v,C,k],styles:[".container[_ngcontent-%COMP%]{max-width:1000px;margin:16px auto;padding:12px;display:flex;flex-direction:column;gap:12px}.full[_ngcontent-%COMP%]{width:100%}.actions[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.nav-links[_ngcontent-%COMP%]{display:flex;gap:8px;margin-top:8px}"]})}}return l})();export{st as MainPhraseComponent};
